<!DOCTYPE HTML>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.w3.org/1999/xhtml"
      layout:decorator="layout">

<head>
    <title>Добавить контакт</title>
    <link rel="stylesheet" th:src="@{/css/contact.css}"/>
</head>
<body>

<section layout:fragment="content">
    <div class="container">
        <h1>Добавить контакт</h1>
        <!--th:action="@{/contacts/addContact}"-->
        <form class="form-horizontal" method="post" id="contactForm" name="contactForm">
            <input type="hidden"
                   th:name="${_csrf.parameterName}"
                   th:value="${_csrf.token}"/>
            <div class="form-group">
                <label for="surname" class="col-sm-2 control-label">Фамилия</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="surname" placeholder="Фамилия" name="surname"
                           th:required="required"/>
                </div>
            </div>
            <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Имя</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="name" placeholder="Имя" name="name"
                           th:required="required"/>
                </div>
            </div>
            <div class="form-group">
                <label for="patronymic" class="col-sm-2 control-label">Отчество</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="patronymic" placeholder="Отчество" name="patronymic"
                           th:required="required"/>
                </div>
            </div>
            <!--<div class="form-group">-->
            <!--<label for="mobilePhone" class="col-sm-2 control-label">Телефон мобильный</label>-->
            <!--<div class="col-sm-10">-->

            <!--<input type="text" class="form-control" id="mobilePhone" placeholder="Телефон мобильный"-->
            <!--name="mobilePhone"-->
            <!--maxlength="12"-->
            <!--th:required="required"/>-->
            <!--</div>-->
            <!--</div>-->
            <!--<div class="form-group">-->
            <!--<label for="homePhone" class="col-sm-2 control-label">Телефон домашний</label>-->
            <!--<div class="col-sm-10">-->

            <!--<input type="text" class="form-control" id="homePhone" placeholder="Телефон домашний"-->
            <!--name="homePhone"-->
            <!--maxlength="12"/>-->
            <!--</div>-->
            <!--</div>-->
            <div class="form-group">
                <label for="mobilePhoneBody" class="col-sm-2 control-label">Телефон мобильный</label>
                <div class="col-sm-10">

                    <div class="input-group" style="max-width: 250px">
                        <span class="input-group-addon" id="sizing-addon1" style="min-width: 50px">+380 (</span>
                        <input type="text" class="form-control" id="mobilePhoneCode" name="homePhoneCode"
                               maxlength="2"
                               aria-describedby="sizing-addon1" size="1"
                               placeholder=""
                               th:required="required"/>
                        <span class="input-group-addon" id="sizing-addon2" style="min-width: 30px">)</span>
                        <input type="text" class="form-control" id="mobilePhoneBody" name="homePhoneBody"
                               maxlength="7" placeholder=""
                               aria-describedby="sizing-addon2" size="7"
                               th:required="required"/>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="homePhoneBody" class="col-sm-2 control-label">Телефон домашний</label>
                <div class="col-sm-10">
                    <div class="input-group" style="max-width: 250px">
                        <span class="input-group-addon" id="sizing-addon3" style="min-width: 50px">+380 (</span>
                        <input type="text" class="form-control" id="homePhoneCode" name="homePhoneCode"
                               maxlength="2"
                               aria-describedby="sizing-addon3" size="1"
                               placeholder=""/>
                        <span class="input-group-addon" id="sizing-addon4" style="min-width: 30px">)</span>
                        <input type="text" class="form-control" id="homePhoneBody" name="homePhoneBody"
                               maxlength="7" placeholder=""
                               aria-describedby="sizing-addon4" size="7"/>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="address" class="col-sm-2 control-label">Адрес</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="address" placeholder="Адрес" name="address" rows="3"
                              style="resize: none;"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label for="email" class="col-sm-2 control-label">Email</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control" id="email" name="email" placeholder="Email"/>
                </div>
            </div>


            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button class=" btn btn-lg btn-default"
                            type="submit"
                            value="submit_now"
                            onclick="sendContact(); return false;">
                        Сохранить
                    </button>
                </div>
            </div>
        </form>
    </div>

    <script>
        function sendContact() {

            var formData = new FormData(document.forms.contactForm);
            var mobilePhone = 380 + document.forms.contactForm.mobilePhoneCode.value
                + document.forms.contactForm.mobilePhoneBody.value;
            console.log(mobilePhone);
            formData.append("mobilePhone", mobilePhone);

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/contacts/addContact");
            xhr.send(formData);
            setTimeout(function () {
                window.location.href = "/contacts";
            }, 500);
        }
    </script>
</section>

</body>
</html>